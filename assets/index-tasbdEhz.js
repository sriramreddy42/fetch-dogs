import{r as c,j as e,b as ee}from"./react-iB2N5rYr.js";import{a as te}from"./react-dom-w6uSoClc.js";import{a as se}from"./axios-C88pvD_q.js";import{u as L,R as re,a as F,N as oe,B as ne}from"./react-router-C5TGh1AR.js";import{C as k,T as d,P as b,B as g,a as v,b as p,c as Y,d as W,e as B,f as E,S as y,L as _,I,G as ae,g as ie,E as ce,A as P,h as R,F as T,i as le,j as de,M as G,k as he}from"./@mui-DkYk-u3e.js";import{l as xe}from"./lodash-C2nYvBw5.js";import"./cookie-CY119PWS.js";import"./scheduler-BNqrtbQi.js";import"./clsx-B-dksMZM.js";import"./@emotion-iZlmqfsp.js";import"./hoist-non-react-statics-C-Qo8PK8.js";import"./@babel-B4YMtfbM.js";import"./stylis-DDa9OTMq.js";import"./react-transition-group-GjTqgaDq.js";import"./react-is-60rj3oqD.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))x(o);new MutationObserver(o=>{for(const r of o)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&x(a)}).observe(document,{childList:!0,subtree:!0});function l(o){const r={};return o.integrity&&(r.integrity=o.integrity),o.referrerPolicy&&(r.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?r.credentials="include":o.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function x(o){if(o.ep)return;o.ep=!0;const r=l(o);fetch(o.href,r)}})();const ge="https://frontend-take-home-service.fetch.com",w=se.create({baseURL:ge,withCredentials:!0,headers:{"Content-Type":"application/json"}}),ue=async(t,s)=>w.post("/auth/login",{name:t,email:s}),me=async()=>w.post("/auth/logout"),pe=async()=>(await w.get("/dogs/breeds")).data,fe=async t=>(await w.get("/dogs/search",{params:t})).data,z=async t=>(await w.post("/dogs",t)).data,je=async t=>(await w.post("/dogs/match",t)).data.match,ve=()=>{const[t,s]=c.useState(null),l=L();return{handleLogin:async(r,a)=>{try{await ue(r,a),localStorage.setItem("isAuthenticated","true"),l("/search")}catch(i){s("Login failed. Please try again."),console.error("Login error:",i)}},handleLogout:async()=>{try{await me(),localStorage.removeItem("isAuthenticated"),l("/")}catch(r){console.error("Logout error:",r)}},error:t}},ye=()=>{const[t,s]=c.useState(""),[l,x]=c.useState(""),{handleLogin:o,error:r}=ve(),[a,i]=c.useState(!1),u=async m=>{if(m.preventDefault(),!t||!l){alert("Please enter both name and email.");return}i(!0),await o(t,l),i(!1)};return e.jsxs(k,{maxWidth:"xs",sx:{minHeight:"100vh",display:"flex",justifyContent:"center",alignItems:"center",position:"relative",backgroundColor:"#f4f4f4"},children:[e.jsx(d,{variant:"h1",sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",opacity:.1,fontSize:"10vw",fontWeight:"bold",whiteSpace:"nowrap",pointerEvents:"none"},children:"Fetch.  ..... .Dogs"}),e.jsxs(b,{elevation:0,sx:{p:4,textAlign:"center",position:"relative",zIndex:1,backgroundColor:"rgb(0, 150, 255)",backdropFilter:"blur(10px)",borderRadius:"12px",border:"1px solid rgba(255, 255, 255, 0.3)"},children:[e.jsx(g,{sx:{display:"flex",justifyContent:"center",mb:2},children:e.jsx("img",{src:"https://fetch.com/assets/images/graphics/footer-logo.svg",alt:"Fetch Logo",width:"150",height:"auto"})}),r&&e.jsx(d,{color:"error",sx:{mb:2},children:r}),e.jsxs(g,{component:"form",onSubmit:u,sx:{display:"flex",flexDirection:"column",gap:2},children:[e.jsx(v,{label:"Name",variant:"outlined",value:t,onChange:m=>s(m.target.value),required:!0,fullWidth:!0}),e.jsx(v,{label:"Email",variant:"outlined",type:"email",value:l,onChange:m=>x(m.target.value),required:!0,fullWidth:!0}),e.jsx(p,{type:"submit",variant:"contained",color:"primary",fullWidth:!0,disabled:a,children:a?e.jsx(Y,{size:24,color:"inherit"}):"Login"})]})]})]})},H=c.createContext(void 0),be=({children:t})=>{const[s,l]=c.useState(()=>{const r=localStorage.getItem("favorites");return r?JSON.parse(r):[]});c.useEffect(()=>{localStorage.setItem("favorites",JSON.stringify(s))},[s]);const x=r=>{l(a=>a.includes(r)?a.filter(i=>i!==r):[...a,r])},o=()=>{l([])};return e.jsx(H.Provider,{value:{favorites:s,toggleFavorite:x,clearFavorites:o},children:t})},D=()=>{const t=c.useContext(H);if(!t)throw new Error("useFavorites must be used within a FavoritesProvider");return t},we=({dogIds:t,searchName:s})=>{const[l,x]=c.useState([]),{favorites:o,toggleFavorite:r}=D(),[,a]=c.useState(!0);return c.useEffect(()=>{async function i(){if(a(!0),t.length>0){const u=await z(t);let m=u;if(s&&s.trim()!==""){const f=s.toLowerCase();m=u.filter(C=>C.name.toLowerCase().includes(f))}x(m)}else x([]);a(!1)}i()},[t,s]),e.jsx(g,{sx:{display:"flex",flexWrap:"wrap",justifyContent:"center",gap:3,mt:4},children:l.length===0?e.jsx(d,{variant:"h6",textAlign:"center",sx:{width:"100%",color:"red",fontWeight:"bold"},children:"No dogs found. Try adjusting your filters! ðŸ¶"}):l.map(i=>e.jsx(g,{sx:{width:{xs:"100%",sm:"48%"},maxWidth:"350px"},children:e.jsxs(W,{sx:{textAlign:"center",p:2,borderRadius:"16px",boxShadow:3,height:"100%"},children:[e.jsx(B,{component:"img",image:i.img,alt:i.name,sx:{width:"100%",height:"250px",objectFit:"cover",borderRadius:"8px"}}),e.jsxs(E,{children:[e.jsx(d,{variant:"h6",fontWeight:"bold",children:i.name}),e.jsxs(d,{variant:"body2",children:["Breed: ",i.breed]}),e.jsxs(d,{variant:"body2",children:["Age: ",i.age]}),e.jsxs(d,{variant:"body2",children:["Location: ",i.zip_code]}),e.jsx(p,{onClick:()=>r(i.id),variant:"contained",sx:{mt:2,borderRadius:"8px",backgroundColor:o.includes(i.id)?"error.main":"primary.main",color:"white","&:hover":{backgroundColor:o.includes(i.id)?"error.dark":"primary.dark"}},children:o.includes(i.id)?"Unfavorite":"Favorite"})]})]})},i.id))})},Ce=()=>{const{favorites:t}=D(),s=L(),l=()=>{localStorage.removeItem("authToken"),sessionStorage.clear(),s("/")};return e.jsxs(b,{elevation:1,sx:{p:.5,mt:2,borderRadius:1},children:[e.jsx(d,{variant:"h5",fontWeight:"bold",align:"center",children:"Your Favorite Dogs"}),e.jsxs(g,{sx:{display:"flex",flexDirection:"row",mt:1},children:[e.jsx(p,{onClick:()=>s("/favorites"),variant:"contained",color:"primary",sx:{mr:.5},children:"Load Favorites"}),e.jsx(p,{onClick:()=>s("/match"),variant:"contained",color:"success",disabled:t.length===0,children:"Find My Match"}),e.jsx(p,{variant:"contained",color:"error",onClick:l,children:"Logout"})]})]})},N=()=>e.jsx(g,{sx:{backgroundColor:"primary.main",color:"white",py:3,mt:5},children:e.jsxs(k,{maxWidth:"lg",children:[e.jsxs(y,{direction:{xs:"column",sm:"row"},justifyContent:"space-between",alignItems:"center",spacing:2,children:[e.jsx(d,{children:e.jsx("img",{src:"https://fetch.com/assets/images/graphics/footer-logo.svg",alt:"Fetch Logo",height:"100"})}),e.jsxs(y,{direction:"row",spacing:3,children:[e.jsx(_,{href:"/",color:"inherit",underline:"none",sx:{fontWeight:"bold"},children:"LogOut"}),e.jsx(_,{href:"/search",color:"inherit",underline:"none",sx:{fontWeight:"bold"},children:"Search"})]}),e.jsxs(y,{direction:"row",spacing:2,children:[e.jsx(I,{href:"https://github.com/sriramreddy42",target:"_blank",color:"inherit",children:e.jsx(ae,{})}),e.jsx(I,{href:"https://www.linkedin.com/in/sriram-b-875a06324/",target:"_blank",color:"inherit",children:e.jsx(ie,{})}),e.jsx(I,{href:"mailto:sbandari@careerattainment.com",color:"inherit",children:e.jsx(ce,{})})]})]}),e.jsxs(d,{variant:"body2",align:"center",sx:{mt:2},children:["Â© ",new Date().getFullYear()," Fetch. All rights reserved."]})]})}),Se=()=>{const[t,s]=c.useState([]),[l,x]=c.useState(""),[o,r]=c.useState(""),[a,i]=c.useState(""),[u,m]=c.useState(""),[f,C]=c.useState(""),[q,A]=c.useState([]),[M,U]=c.useState(0),[J,Z]=c.useState(0),[S,K]=c.useState("asc"),[$,O]=c.useState(!1),Q=xe.debounce(n=>{r(n),n.trim()&&(x(""),i(""),m(""),C("")),j()},500),V=n=>{const h=n.target.value?Number(n.target.value):"";h!==""&&f!==""&&h>f&&C(h),m(h)},X=n=>{const h=n.target.value?Number(n.target.value):"";h!==""&&u!==""&&h<u&&m(h),C(h)};c.useEffect(()=>{async function n(){try{const h=await pe();s(h)}catch(h){console.error("Error fetching breeds:",h)}}n()},[]);const j=async()=>{O(!0);const n={size:25,from:M*25,sort:`breed:${S}`};o.trim()?n.name=o.toLowerCase():(l&&(n.breeds=[l]),a.trim()&&(n.zipCodes=[a]),u&&(n.ageMin=u),f&&(n.ageMax=f));try{const h=await fe(n);h.resultIds.length===0?A([]):A(h.resultIds),Z(h.total)}catch(h){console.error("Error fetching dogs:",h),A([])}finally{O(!1)}};return c.useEffect(()=>{j()},[M,S]),e.jsxs(e.Fragment,{children:[e.jsx(P,{position:"fixed",color:"primary",elevation:5,sx:{width:"100%",margin:0,padding:0,top:0,left:0,zIndex:1100},children:e.jsxs(R,{children:[e.jsxs(d,{variant:"h6",sx:{flexGrow:1,ml:2},children:[e.jsx("img",{src:"https://fetch.com/assets/images/graphics/footer-logo.svg",alt:"Fetch Logo",height:"40"}),"__Dogs Search"]}),e.jsx(Ce,{})]})}),e.jsxs(k,{maxWidth:"lg",sx:{mt:18},children:[e.jsxs(g,{sx:{mt:10},children:[e.jsx(d,{variant:"h4",gutterBottom:!0,children:"Search for Dogs ðŸ¶"}),e.jsxs(y,{spacing:5,direction:{xs:"column",sm:"row"},alignItems:"center",children:[e.jsx(v,{label:"Search by Name",type:"text",variant:"outlined",size:"small",value:o,onChange:n=>Q(n.target.value),sx:{width:"450px"}}),e.jsxs(T,{sx:{width:"450px"},size:"small",children:[e.jsx(le,{children:"Breed"}),e.jsxs(de,{value:l,onChange:n=>{x(n.target.value),r(""),j()},label:"Breed",children:[e.jsx(G,{value:"",children:"All Breeds"}),t.map(n=>e.jsx(G,{value:n,children:n},n))]})]}),e.jsx(T,{sx:{width:"450px"},size:"small",children:e.jsx(v,{label:"Search by Zip Code",type:"text",variant:"outlined",size:"small",value:a,onChange:n=>{i(n.target.value),r("")},sx:{width:"150px"}})}),e.jsx(v,{label:"Min Age",type:"number",variant:"outlined",size:"small",inputProps:{min:1},value:u,onChange:n=>{V(n),r(""),j()},sx:{width:"450px"}}),e.jsx(v,{label:"Max Age",type:"number",variant:"outlined",size:"small",inputProps:{min:1},value:f,onChange:n=>{X(n),r(""),j()},sx:{width:"450px"}}),e.jsx(p,{variant:"contained",color:"primary",onClick:j,sx:{width:"450px"},children:"Search"})]}),e.jsx(y,{spacing:2,direction:"row",justifyContent:"flexstart",mt:3,children:e.jsxs(p,{variant:"outlined",color:"secondary",onClick:()=>K(S==="asc"?"desc":"asc"),children:["Sort: ",S==="asc"?"Ascending":"Descending"]})})]}),$?e.jsx(g,{sx:{display:"flex",justifyContent:"center",mt:5},children:e.jsx(Y,{})}):e.jsx(we,{dogIds:q,searchName:o}),e.jsx(y,{direction:"row",justifyContent:"center",mt:8,spacing:20,children:e.jsx(he,{count:Math.ceil(J/25),page:M,onChange:(n,h)=>U(h),color:"primary"})})]}),e.jsx(N,{})]})},Fe=()=>{const{favorites:t,clearFavorites:s}=D(),[l,x]=c.useState([]),o=L();c.useEffect(()=>{(async()=>{if(t.length>0){const i=await z(t);x(i)}})()},[t]);const r=()=>{s(),x([])};return e.jsxs(e.Fragment,{children:[e.jsx(P,{position:"fixed",color:"primary",elevation:5,sx:{width:"100%",margin:0,padding:0,top:0,left:0,zIndex:1100},children:e.jsxs(R,{children:[e.jsxs(d,{variant:"h6",sx:{flexGrow:1,ml:2},children:[e.jsx("img",{src:"https://fetch.com/assets/images/graphics/footer-logo.svg",alt:"Fetch Logo",height:"40"}),"__Dogs Search"]}),e.jsx(b,{children:e.jsxs(g,{sx:{display:"flex",flexDirection:"row"},children:[e.jsx(p,{onClick:()=>o("/match"),variant:"contained",color:"primary",disabled:t.length===0,sx:{mr:.5},children:"Find Match"}),e.jsx(p,{onClick:()=>o("/search"),variant:"contained",color:"primary",children:"Home"})]})})]})}),e.jsx(g,{sx:{mt:12,p:3},children:e.jsxs(b,{elevation:3,sx:{p:4,mt:4,borderRadius:3},children:[e.jsx(d,{variant:"h5",fontWeight:"bold",children:"Your Favorite Dogs"}),l.length===0?e.jsx(d,{color:"textSecondary",sx:{mt:2},children:"No favorite dogs yet."}):e.jsx(g,{sx:{display:"flex",flexWrap:"wrap",justifyContent:"center",gap:3,mt:2},children:l.map(a=>e.jsx(g,{sx:{width:{xs:"100%",sm:"48%",md:"30%"},maxWidth:"350px"},children:e.jsxs(W,{sx:{borderRadius:2,boxShadow:3},children:[e.jsx(B,{component:"img",image:a.img,alt:a.name,sx:{width:"100%",height:200,objectFit:"cover"}}),e.jsxs(E,{children:[e.jsx(d,{variant:"h6",fontWeight:"bold",children:a.name}),e.jsxs(d,{variant:"body2",children:["Breed: ",a.breed]}),e.jsxs(d,{variant:"body2",children:["Age: ",a.age]})]})]})},a.id))}),l.length>0&&e.jsx(p,{onClick:r,variant:"contained",color:"error",sx:{mt:3},children:"Clear Favorites"})]})}),e.jsx(N,{})]})},Le=()=>{const{favorites:t}=D(),[s,l]=c.useState(null),[x,o]=c.useState(!1),r=L(),a=async()=>{if(t.length!==0){o(!0);try{const i=await je(t),u=await z([i]);l(u[0])}catch(i){console.error("Error finding match:",i)}o(!1)}};return e.jsxs(e.Fragment,{children:[e.jsx(P,{position:"fixed",color:"primary",elevation:5,sx:{width:"100%",margin:0,padding:0,top:0,left:0,zIndex:1100},children:e.jsxs(R,{children:[e.jsxs(d,{variant:"h6",sx:{flexGrow:1,ml:2},children:[e.jsx("img",{src:"https://fetch.com/assets/images/graphics/footer-logo.svg",alt:"Fetch Logo",height:"40"}),"__Dogs Search"]}),e.jsx(b,{children:e.jsx(g,{sx:{display:"flex",flexDirection:"row"},children:e.jsx(p,{onClick:()=>r("/search"),variant:"contained",color:"primary",children:"Home"})})})]})}),e.jsx(g,{sx:{mt:12,p:3},children:e.jsxs(b,{elevation:3,sx:{p:4,mt:4,borderRadius:3},children:[e.jsx(d,{variant:"h5",fontWeight:"bold",children:"Find Your Perfect Match! ðŸ¶"}),e.jsx(p,{onClick:a,variant:"contained",color:"success",sx:{mt:2},disabled:t.length===0||x,children:x?"Finding Match...":"Find My Match"}),s&&e.jsxs(g,{sx:{mt:4,textAlign:"center"},children:[e.jsx(d,{variant:"h5",fontWeight:"bold",children:"Your Match!"}),e.jsxs(W,{sx:{maxWidth:400,mx:"auto",mt:2},children:[e.jsx(B,{component:"img",image:s.img,alt:s.name,sx:{width:"100%",height:250,objectFit:"cover"}}),e.jsxs(E,{children:[e.jsx(d,{variant:"h6",fontWeight:"bold",children:s.name}),e.jsxs(d,{variant:"body2",children:["Breed: ",s.breed]}),e.jsxs(d,{variant:"body2",children:["Age: ",s.age]})]})]})]})]})}),e.jsx(N,{})]})},De=({element:t})=>localStorage.getItem("isAuthenticated")==="true"?t:e.jsx(oe,{to:"/"}),Ae=()=>e.jsxs(re,{children:[e.jsx(F,{path:"/",element:e.jsx(ye,{})}),e.jsx(F,{path:"/search",element:e.jsx(De,{element:e.jsx(Se,{})})}),e.jsx(F,{path:"/favorites",element:e.jsx(Fe,{})}),e.jsx(F,{path:"/match",element:e.jsx(Le,{})})]});te.createRoot(document.getElementById("root")).render(e.jsx(ee.StrictMode,{children:e.jsx(ne,{children:e.jsx(be,{children:e.jsx(Ae,{})})})}));
